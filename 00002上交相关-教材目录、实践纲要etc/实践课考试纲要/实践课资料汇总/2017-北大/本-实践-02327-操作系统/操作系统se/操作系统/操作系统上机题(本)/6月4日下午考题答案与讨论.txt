[原创]6月4日下午考题答案与讨论/*本人认为6月4日下午出的题目"对FIFO算法做如下简单的修改..."所谈到的相关算法实际就使这个题变成了LRU算法.他说了那么多,纯粹是迷惑人.不知各位看法如何.如果您有不同看法,欢迎你发贴子,来讨论.下面是我对这个题的具体实现# include <iostream.h># include <stdio.h># include <stdlib.h># include <iomanip.h>typedef struct node *pointer ;struct node{int data;pointer next;};
typedef pointer lklist ;int a[600];lklist init_lklist(lklist head){pointer p,q;int i=0;head=new node;p=head;    p->data=0;p->next=NULL;for(i=0;i<3;i++){      q=new node ;      q->data=65536;      p->next=q;   p=q;}p->next=NULL;    return head;}int out_lklist(lklist head){pointer p;    p=head->next;while(p!=NULL){         cout<<p->data;   p=p->next ;}return 1;}int read_data(){FILE *fp;char filename[20];cout<<"Please input filename:>";cin>>filename;if((fp=fopen(filename,"r+"))==NULL){  cout<<"sorry! file can not open!"<<endl;  exit(0);}int i=0;    while(!feof(fp)){     fscanf(fp,"%d",&a[i++]);  if(a[i-1]==EOF)   break;}return i;}    int find_data(lklist head,int x){pointer p;p=head->next  ;int flag=1;while(p!=NULL){  if(p->data==x)  {   flag=0;    break;  }        p=p->next ;}if(flag==1)  return 0;else  return 1;}int delin_data(lklist head,int y){pointer p,q;p=head;q=p->next ;if(q->data==65536) cout<<setw(2)<<y<<" ";elsecout<<setw(2)<<q->data<<" " ;p->next =q->next ;delete q;p=head;while(p->next!=NULL){  p=p->next ;}q=new node;    q->data=y;p->next =q;p=q;p->next =NULL;return 1;}int delin_data2(lklist head,int y){pointer p,q;q=head->next ;if(q->data==y)    p=head;elsewhile(q!=NULL){   if(q->data==y)        break;  else  {   p=q;   q=q->next ;  }}       q=p->next;    p->next=q->next;delete q;p=head;while(p->next!=NULL){  p=p->next ;}q=new node;    q->data=y;p->next =q;p=q;p->next =NULL;return 1;}
**********************************************************void main(){int p;lklist head=NULL;int k=0,i=0,x;k=read_data();cout<<"输出从文件读入的数据"<<endl;for(i=0;i<k;i++)cout<<setw(2)<<a[i]; cout<<endl;head=init_lklist(head);/*cout<<"FIFO算法结果:"<<endl;    for(i=0;i<k;i++)            //FIFO算法 {  x=a[i];  p=find_data(head,x);  if(p)  cout<<setw(2)<<"*"<<" ";  else        delin_data(head,x);  out_lklist(head); //如果此处加上将能显示每次整个页表变化情况.  cout<<endl;}   */cout<<"LRU算法结果:"<<endl;for(i=0;i<k;i++)        //LRU算法{  x=a[i];  p=find_data(head,x);  if(p)  {   delin_data2(head,x);      cout<<setw(2)<<"*"<<" ";  }  else        delin_data(head,x);  //out_lklist(head); //如果此处加上将能显示每次整个页表变化情况.  //cout<<endl;}    cout<<endl<<endl;    }     